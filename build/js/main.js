"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
//TDS
(function () {
  var url = new URL(window.location.href);
  var params = ['l', 'utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'param1', 'param2', 'param3', 'param4', 'creative_type', 'creative_id'];
  var linkParams = ['affid', 'cpaid']; // ищем в url redirectUrl в url:

  if (url.searchParams.has('redirectUrl')) {
    var redirectUrl = new URL(url.searchParams.get('redirectUrl'));
    if (redirectUrl.href.match(/\//g).length === 4 && redirectUrl.searchParams.get('l')) {
      //если ссылка в ссылка redirectUrl корректная
      localStorage.setItem('redirectUrl', redirectUrl.href); // указываем точкой входа домен с протоколом из redirectUrl
    }
  }

  params.forEach(function (param) {
    if (url.searchParams.has(param)) localStorage.setItem(param, url.searchParams.get(param));
  });
  linkParams.forEach(function (linkParam) {
    if (url.searchParams.has(linkParam)) localStorage.setItem(linkParam, url.searchParams.get(linkParam));
  });
  window.addEventListener('click', function (e) {
    var link,
      parent = e.target.closest('a');
    if (parent.getAttribute('href') !== 'https://tds.favbet.partners') {
      return;
    }
    if (parent) {
      e.preventDefault();
      var affid = localStorage.getItem('affid');
      var cpaid = localStorage.getItem('cpaid');
      if (localStorage.getItem("redirectUrl")) {
        link = new URL(localStorage.getItem("redirectUrl"));
      } else {
        link = new URL(parent.href);
        if (affid && cpaid) {
          link.pathname = '/' + affid + '/' + cpaid;
        }
      }
      params.forEach(function (param) {
        if (url.searchParams.has(param)) {
          link.searchParams.set(param, localStorage.getItem(param));
        }
      });
      document.location.href = link;
    }
  });
})();
var cells = document.querySelectorAll('.cell');
var statusText = document.getElementById('status');
var statusTextInfo = document.getElementById('status-text');
var statusContainer = document.querySelector(".land__left");
var statusBox = document.querySelector(".land__status");
var restartBtns = document.querySelectorAll('.restart-game');
var overlay = document.querySelector(".overlay");
var sideBtns = document.querySelectorAll('.side-btn');
var startGame = document.querySelector('.start-game');
var gameContainer = document.getElementById('game');
var landWrapper = document.querySelector('.land');
var statusIconX = document.querySelector('[data-player="X"]');
var statusIconO = document.querySelector('[data-player="O"]');
var gameGrid = document.querySelector('.game-grid');
var persLeft = document.querySelector('.game-pers._left');
var persRight = document.querySelector('.game-pers._right');
var gameOverText = document.querySelector('.game-over');
var board = ['', '', '', '', '', '', '', '', ''];
var isComputerX = true;
var currentPlayer, computerPlayer;
document.body.style.overflow = "hidden";
if (isComputerX) {
  document.querySelector('[data-side="X"]').classList.remove('_active');
  document.querySelector('[data-side="0"]').classList.add('_active');
} else {
  document.querySelector('[data-side="0"]').classList.remove('_active');
  document.querySelector('[data-side="X"]').classList.add('_active');
}
var winningCombos = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];
function initializeGame() {
  currentPlayer = isComputerX ? 'Гравець 02' : 'Гравець 01';
  computerPlayer = isComputerX ? 'Гравець 01' : 'Гравець 02';
  board = ['', '', '', '', '', '', '', '', ''];
  cells.forEach(function (cell) {
    cell.textContent = '';
    cell.classList.remove('taken', 'X-player', 'O-player');
  });
  var line = document.querySelector('.win-line');
  if (line) {
    line.style.transform = 'scaleX(0)';
  }
  checkStatusContainer(currentPlayer);
  checkStatusIcon(currentPlayer);
  statusText.textContent = "".concat(currentPlayer);
  statusTextInfo.textContent = "\u0422\u0412\u0406\u0419_\u0425\u0406\u0414";
  if (currentPlayer === computerPlayer) {
    setTimeout(bestMove, 500);
  }
}
function checkStatusIcon(player) {
  if (player === 'Гравець 01') {
    statusIconX.classList.add("_active");
    statusIconO.classList.remove("_active");
  }
  if (player === 'Гравець 02') {
    statusIconO.classList.add("_active");
    statusIconX.classList.remove("_active");
  }
}
function checkStatusContainer(player) {
  if (player === 'Гравець 01') {
    statusBox.classList.add("X-player");
    statusBox.classList.remove("O-player");
  }
  if (player === 'Гравець 02') {
    statusBox.classList.add("O-player");
    statusBox.classList.remove("X-player");
  }
}
function checkWinner(player) {
  var _iterator = _createForOfIteratorHelper(winningCombos),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var combo = _step.value;
      if (combo.every(function (index) {
        return board[index] === player;
      })) {
        return combo;
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return null;
}
function isDraw() {
  return board.every(function (cell) {
    return cell !== '';
  });
}
function bestMove() {
  setTimeout(function () {
    var bestScore = -Infinity;
    var move;
    for (var i = 0; i < board.length; i++) {
      if (board[i] === '') {
        board[i] = computerPlayer;
        var score = minimax(board, 0, false);
        board[i] = '';
        if (score > bestScore) {
          bestScore = score;
          move = i;
        }
      }
    }
    board[move] = computerPlayer;
    if (computerPlayer === "Гравець 02") {
      cells[move].classList.add('O-player');
    }
    if (computerPlayer === "Гравець 01") {
      cells[move].classList.add('X-player');
    }
    checkStatusIcon(computerPlayer);
    checkStatusContainer(currentPlayer);
    statusTextInfo.textContent = "\u0427\u0415\u041A\u0410\u0419";
    cells[move].classList.add('taken');
    var winningCombo = checkWinner(computerPlayer);
    if (winningCombo) {
      showWinLine(winningCombo);
      setTimeout(function () {
        statusText.textContent = "".concat(computerPlayer);
        hideAfterGame("lose");
        endGame();
      }, 500);
    } else if (isDraw()) {
      hideAfterGame("draw");
      statusText.textContent = "Нічия!";
    } else {
      setTimeout(function () {
        currentPlayer = currentPlayer === 'Гравець 01' ? 'Гравець 02' : 'Гравець 01';
        checkStatusIcon(currentPlayer);
        checkStatusContainer(currentPlayer);
        statusTextInfo.textContent = "\u0422\u0412\u0406\u0419_\u0425\u0406\u0414";
        statusText.textContent = "".concat(currentPlayer);
      }, 1500);
    }
  }, 1000);
}
function minimax(board, depth, isMaximizing) {
  if (checkWinner(computerPlayer)) return 10 - depth;
  if (checkWinner(currentPlayer)) return depth - 10;
  if (isDraw()) return 0;
  if (isMaximizing) {
    var bestScore = -Infinity;
    for (var i = 0; i < board.length; i++) {
      if (board[i] === '') {
        board[i] = computerPlayer;
        var score = minimax(board, depth + 1, false);
        board[i] = '';
        bestScore = Math.max(score, bestScore);
      }
    }
    return bestScore;
  } else {
    var _bestScore = Infinity;
    for (var _i = 0; _i < board.length; _i++) {
      if (board[_i] === '') {
        board[_i] = currentPlayer;
        var _score = minimax(board, depth + 1, true);
        board[_i] = '';
        _bestScore = Math.min(_score, _bestScore);
      }
    }
    return _bestScore;
  }
}
function handleCellClick(e) {
  var cell = e.target;
  var index = cell.dataset.index;
  if (board[index] === '' && currentPlayer !== computerPlayer) {
    board[index] = currentPlayer;
    if (currentPlayer === "Гравець 02") {
      cell.classList.add('O-player');
    }
    if (currentPlayer === "Гравець 01") {
      cell.classList.add('X-player');
    }
    cell.classList.add('taken');
    var winningCombo = checkWinner(currentPlayer);
    if (winningCombo) {
      showWinLine(winningCombo);
      setTimeout(function () {
        statusText.textContent = "".concat(currentPlayer);
        hideAfterGame("win");
        endGame();
      }, 500);
    } else if (isDraw()) {
      setTimeout(function () {
        hideAfterGame("draw");
        statusText.textContent = "Нічия!";
      }, 500);
    } else {
      setTimeout(function () {
        statusText.textContent = "".concat(computerPlayer);
      }, 1500);
      currentPlayer = computerPlayer;
      setTimeout(bestMove, 500);
    }
  }
}
function hideAfterGame(winner) {
  gameContainer.style.opacity = "0";
  gameGrid.style.opacity = "0";
  statusBox.classList.remove("O-player", "X-player");
  persLeft.style.transform = "translateX(220%)";
  persRight.style.transform = "translateX(-220%) scale(-1, 1)";
  if (winner === "lose") {
    gameOverText.textContent = "не пощастило!";
  }
  if (winner === "win") {
    gameOverText.textContent = "ти переміг!";
  }
  if (winner === "draw") {
    gameOverText.textContent = "ти був на рівні!";
  }
  setTimeout(function () {
    gameOverText.classList.remove("opacity");
    setTimeout(function () {
      if (winner === "draw") {
        showPopup("._draw");
      }
      if (winner === "win") {
        showPopup("._win");
      }
      if (winner === "lose") {
        showPopup("._lose");
      }
    }, 200);
  }, 200);
}
function endGame() {
  cells.forEach(function (cell) {
    return cell.classList.add('taken');
  });
}
restartBtns.forEach(function (btn) {
  btn.addEventListener('click', function () {
    isComputerX = !isComputerX;
    initializeGame();
    gameOverText.textContent = "";
    gameGrid.style.opacity = "1";
    gameContainer.style.opacity = "1";
    persLeft.style.transform = "translateX(0%)";
    persRight.style.transform = "translateX(0%) scale(-1, 1)";
    sideBtns.forEach(function (btn) {
      btn.classList.remove("_active");
      startGame.classList.add("disabled");
      btn.addEventListener('click', function () {
        startGame.classList.remove("disabled");
        var side = btn.dataset.side;
        isComputerX = side !== 'X';
        sideBtns.forEach(function (item) {
          return item.classList.remove('_active');
        });
        btn.classList.add('_active');
      });
    });

    // document.body.style.overflow = "auto";
    document.querySelectorAll(".popup").forEach(function (popup) {
      if (popup.classList.contains('_start')) {
        popup.classList.remove('hide-popup');
        popup.classList.remove('hide');
        popup.style.opacity = "1";
      } else {
        popup.classList.add('hide-popup');
      }
    });
  });
});
cells.forEach(function (cell) {
  return cell.addEventListener('click', handleCellClick);
});
sideBtns.forEach(function (btn) {
  btn.addEventListener('click', function () {
    var side = btn.dataset.side;
    isComputerX = side !== 'X';
    sideBtns.forEach(function (item) {
      return item.classList.remove('_active');
    });
    btn.classList.add('_active');
  });
});
startGame.addEventListener('click', function () {
  document.getElementById('side-selection').style.opacity = '0';
  gameContainer.style.opacity = '1';
  landWrapper.classList.add("_decor");
  document.body.style.overflow = "auto";
  setTimeout(function () {
    enableMouseScale(document.querySelector('.decor'));
  }, 2500);
  initializeGame();
  hidePopup("#side-selection");
});
function showPopup(popup) {
  setTimeout(function () {
    popup = overlay.querySelector(popup);
    overlay.classList.remove("opacity");
    document.body.style.overflow = "hidden";
    setTimeout(function () {
      popup.classList.remove("hide-popup");
    }, 500);
  }, 2000);
}
function hidePopup(popup) {
  popup = overlay.querySelector(popup);
  overlay.classList.add("opacity");
  popup.classList.add("hide");
}
function enableMouseScale(element) {
  var minScale = 1;
  var maxScale = 1.05;
  element.style.transition = 'transform 0.1s ease';
  document.addEventListener('mousemove', function (e) {
    var rect = element.getBoundingClientRect();
    var x = e.clientX - rect.left;
    var y = e.clientY - rect.top;
    var centerX = rect.width / 2;
    var centerY = rect.height / 2;
    var distance = Math.hypot(x - centerX, y - centerY);
    var maxDistance = Math.hypot(centerX, centerY);
    var scale = minScale + (1 - distance / maxDistance) * (maxScale - minScale);
    element.style.transform = "scale(".concat(Math.min(maxScale, Math.max(minScale, scale)), ")");
  });
  element.addEventListener('mouseleave', function () {
    element.style.transform = "scale(".concat(minScale, ")");
  });
}
function showWinLine(combo) {
  var line = document.querySelector('.win-line');
  line.style.transform = 'scaleX(0)';
  // line.style.width = '100%';
  // line.style.height = '44px';
  // line.style.background = '#00f0ff';

  var positions = {
    '0,1,2': {
      top: '26%',
      left: '50%',
      rotate: '0deg',
      width: '80%'
    },
    '3,4,5': {
      top: '52%',
      left: '50%',
      rotate: '0deg',
      width: '80%'
    },
    '6,7,8': {
      top: '78.33%',
      left: '50%',
      rotate: '0deg',
      width: '80%'
    },
    '0,3,6': {
      top: '50%',
      left: '24.5%',
      rotate: '90deg',
      width: '80%'
    },
    '1,4,7': {
      top: '50%',
      left: '50%',
      rotate: '90deg',
      width: '80%'
    },
    '2,5,8': {
      top: '50%',
      left: '76.5%',
      rotate: '90deg',
      width: '80%'
    },
    '0,4,8': {
      top: '50%',
      left: '50%',
      rotate: '45deg',
      width: '100%'
    },
    '2,4,6': {
      top: '50%',
      left: '50%',
      rotate: '-45deg',
      width: '100%'
    }
  };
  var key = combo.sort(function (a, b) {
    return a - b;
  }).join(',');
  var pos = positions[key];
  var width = pos.width;
  if (pos) {
    line.style.top = pos.top;
    line.style.left = pos.left;
    line.style.transform = "translate(-50%, -50%) rotate(".concat(pos.rotate, ") scaleX(1)");
    line.style.width = "".concat(pos.width);
    line.style.opacity = "1";
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidXJsIiwiVVJMIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwicGFyYW1zIiwibGlua1BhcmFtcyIsInNlYXJjaFBhcmFtcyIsImhhcyIsInJlZGlyZWN0VXJsIiwiZ2V0IiwibWF0Y2giLCJsZW5ndGgiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZm9yRWFjaCIsInBhcmFtIiwibGlua1BhcmFtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJsaW5rIiwicGFyZW50IiwidGFyZ2V0IiwiY2xvc2VzdCIsImdldEF0dHJpYnV0ZSIsInByZXZlbnREZWZhdWx0IiwiYWZmaWQiLCJnZXRJdGVtIiwiY3BhaWQiLCJwYXRobmFtZSIsInNldCIsImRvY3VtZW50IiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3RhdHVzVGV4dCIsImdldEVsZW1lbnRCeUlkIiwic3RhdHVzVGV4dEluZm8iLCJzdGF0dXNDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwic3RhdHVzQm94IiwicmVzdGFydEJ0bnMiLCJvdmVybGF5Iiwic2lkZUJ0bnMiLCJzdGFydEdhbWUiLCJnYW1lQ29udGFpbmVyIiwibGFuZFdyYXBwZXIiLCJzdGF0dXNJY29uWCIsInN0YXR1c0ljb25PIiwiZ2FtZUdyaWQiLCJwZXJzTGVmdCIsInBlcnNSaWdodCIsImdhbWVPdmVyVGV4dCIsImJvYXJkIiwiaXNDb21wdXRlclgiLCJjdXJyZW50UGxheWVyIiwiY29tcHV0ZXJQbGF5ZXIiLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsIndpbm5pbmdDb21ib3MiLCJpbml0aWFsaXplR2FtZSIsImNlbGwiLCJ0ZXh0Q29udGVudCIsImxpbmUiLCJ0cmFuc2Zvcm0iLCJjaGVja1N0YXR1c0NvbnRhaW5lciIsImNoZWNrU3RhdHVzSWNvbiIsInNldFRpbWVvdXQiLCJiZXN0TW92ZSIsInBsYXllciIsImNoZWNrV2lubmVyIiwiY29tYm8iLCJldmVyeSIsImluZGV4IiwiaXNEcmF3IiwiYmVzdFNjb3JlIiwiSW5maW5pdHkiLCJtb3ZlIiwiaSIsInNjb3JlIiwibWluaW1heCIsIndpbm5pbmdDb21ibyIsInNob3dXaW5MaW5lIiwiaGlkZUFmdGVyR2FtZSIsImVuZEdhbWUiLCJkZXB0aCIsImlzTWF4aW1pemluZyIsIk1hdGgiLCJtYXgiLCJtaW4iLCJoYW5kbGVDZWxsQ2xpY2siLCJkYXRhc2V0Iiwid2lubmVyIiwib3BhY2l0eSIsInNob3dQb3B1cCIsImJ0biIsInNpZGUiLCJpdGVtIiwicG9wdXAiLCJjb250YWlucyIsImVuYWJsZU1vdXNlU2NhbGUiLCJoaWRlUG9wdXAiLCJlbGVtZW50IiwibWluU2NhbGUiLCJtYXhTY2FsZSIsInRyYW5zaXRpb24iLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwieCIsImNsaWVudFgiLCJsZWZ0IiwieSIsImNsaWVudFkiLCJ0b3AiLCJjZW50ZXJYIiwid2lkdGgiLCJjZW50ZXJZIiwiaGVpZ2h0IiwiZGlzdGFuY2UiLCJoeXBvdCIsIm1heERpc3RhbmNlIiwic2NhbGUiLCJwb3NpdGlvbnMiLCJyb3RhdGUiLCJrZXkiLCJzb3J0IiwiYSIsImIiLCJqb2luIiwicG9zIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0EsQ0FBQyxZQUFZO0VBQ1QsSUFBSUEsR0FBRyxHQUFHLElBQUlDLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxRQUFRLENBQUNDLElBQUksQ0FBQztFQUN2QyxJQUFJQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLGFBQWEsQ0FBQztFQUNqSyxJQUFJQyxVQUFVLEdBQUcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQzs7RUFFckMsSUFBSU4sR0FBRyxDQUFD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LEVBQUUsS0FBSztNQUFFSCxJQUFJLEVBQUUsS0FBSztNQUFFYSxNQUFNLEVBQUUsT0FBTztNQUFFUixLQUFLLEVBQUU7SUFBTyxDQUFDO0lBQ3BFLE9BQU8sRUFBRTtNQUFFRixHQUFHLEVBQUUsS0FBSztNQUFFSCxJQUFJLEVBQUUsS0FBSztNQUFFYSxNQUFNLEVBQUUsUUFBUTtNQUFFUixLQUFLLEVBQUU7SUFBTztFQUN4RSxDQUFDO0VBRUQsSUFBTVMsR0FBRyxHQUFHckQsS0FBSyxDQUFDc0QsSUFBSSxDQUFDLFVBQUNDLENBQUMsRUFBRUMsQ0FBQztJQUFBLE9BQUtELENBQUMsR0FBR0MsQ0FBQztFQUFBLEVBQUMsQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQztFQUdqRCxJQUFNQyxHQUFHLEdBQUdQLFNBQVMsQ0FBQ0UsR0FBRyxDQUFDO0VBRTFCLElBQUlULEtBQUssR0FBR2MsR0FBRyxDQUFDZCxLQUFLO0VBRXJCLElBQUljLEdBQUcsRUFBRTtJQUNMbEUsSUFBSSxDQUFDVCxLQUFLLENBQUMyRCxHQUFHLEdBQUdnQixHQUFHLENBQUNoQixHQUFHO0lBQ3hCbEQsSUFBSSxDQUFDVCxLQUFLLENBQUN3RCxJQUFJLEdBQUdtQixHQUFHLENBQUNuQixJQUFJO0lBQzFCL0MsSUFBSSxDQUFDVCxLQUFLLENBQUNVLFNBQVMsMENBQW1DaUUsR0FBRyxDQUFDTixNQUFNLGdCQUFhO0lBQzlFNUQsSUFBSSxDQUFDVCxLQUFLLENBQUM2RCxLQUFLLGFBQU1jLEdBQUcsQ0FBQ2QsS0FBSyxDQUFFO0lBQ2pDcEQsSUFBSSxDQUFDVCxLQUFLLENBQUN1QyxPQUFPLE1BQU07RUFDNUI7QUFDSiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9URFNcbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIHZhciBwYXJhbXMgPSBbJ2wnLCAndXRtX3NvdXJjZScsICd1dG1fbWVkaXVtJywgJ3V0bV9jYW1wYWlnbicsICd1dG1fdGVybScsICd1dG1fY29udGVudCcsICdwYXJhbTEnLCAncGFyYW0yJywgJ3BhcmFtMycsICdwYXJhbTQnLCAnY3JlYXRpdmVfdHlwZScsICdjcmVhdGl2ZV9pZCddO1xuICAgIHZhciBsaW5rUGFyYW1zID0gWydhZmZpZCcsICdjcGFpZCddOyAvLyDQuNGJ0LXQvCDQsiB1cmwgcmVkaXJlY3RVcmwg0LIgdXJsOlxuXG4gICAgaWYgKHVybC5zZWFyY2hQYXJhbXMuaGFzKCdyZWRpcmVjdFVybCcpKSB7XG4gICAgICAgIHZhciByZWRpcmVjdFVybCA9IG5ldyBVUkwodXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3JlZGlyZWN0VXJsJykpO1xuXG4gICAgICAgIGlmIChyZWRpcmVjdFVybC5ocmVmLm1hdGNoKC9cXC8vZykubGVuZ3RoID09PSA0ICYmIHJlZGlyZWN0VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2wnKSkge1xuICAgICAgICAgICAgLy/QtdGB0LvQuCDRgdGB0YvQu9C60LAg0LIg0YHRgdGL0LvQutCwIHJlZGlyZWN0VXJsINC60L7RgNGA0LXQutGC0L3QsNGPXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVkaXJlY3RVcmwnLCByZWRpcmVjdFVybC5ocmVmKTsgLy8g0YPQutCw0LfRi9Cy0LDQtdC8INGC0L7Rh9C60L7QuSDQstGF0L7QtNCwINC00L7QvNC10L0g0YEg0L/RgNC+0YLQvtC60L7Qu9C+0Lwg0LjQtyByZWRpcmVjdFVybFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgIGlmICh1cmwuc2VhcmNoUGFyYW1zLmhhcyhwYXJhbSkpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHBhcmFtLCB1cmwuc2VhcmNoUGFyYW1zLmdldChwYXJhbSkpO1xuICAgIH0pO1xuXG4gICAgbGlua1BhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5rUGFyYW0pIHtcbiAgICAgICAgaWYgKHVybC5zZWFyY2hQYXJhbXMuaGFzKGxpbmtQYXJhbSkpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGxpbmtQYXJhbSwgdXJsLnNlYXJjaFBhcmFtcy5nZXQobGlua1BhcmFtKSk7XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgbGluayxcbiAgICAgICAgICAgIHBhcmVudCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2EnKTtcblxuICAgICAgICBpZiAocGFyZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpICE9PSAnaHR0cHM6Ly90ZHMuZmF2YmV0LnBhcnRuZXJzJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGFmZmlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FmZmlkJyk7XG4gICAgICAgICAgICB2YXIgY3BhaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3BhaWQnKTtcblxuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmVkaXJlY3RVcmxcIikpIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3IFVSTChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlZGlyZWN0VXJsXCIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGluayA9IG5ldyBVUkwocGFyZW50LmhyZWYpO1xuICAgICAgICAgICAgICAgIGlmIChhZmZpZCAmJiBjcGFpZCkge1xuICAgICAgICAgICAgICAgICAgICBsaW5rLnBhdGhuYW1lID0gJy8nICsgYWZmaWQgKyAnLycgKyBjcGFpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICAgICAgICAgIGlmICh1cmwuc2VhcmNoUGFyYW1zLmhhcyhwYXJhbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluay5zZWFyY2hQYXJhbXMuc2V0KHBhcmFtLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwYXJhbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gbGluaztcbiAgICAgICAgfVxuICAgIH0pO1xufSkoKTtcblxuXG5jb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG5jb25zdCBzdGF0dXNUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpO1xuY29uc3Qgc3RhdHVzVGV4dEluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzLXRleHQnKTtcbmNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGFuZF9fbGVmdFwiKTtcbmNvbnN0IHN0YXR1c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGFuZF9fc3RhdHVzXCIpO1xuY29uc3QgcmVzdGFydEJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVzdGFydC1nYW1lJyk7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xuY29uc3Qgc2lkZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1idG4nKTtcbmNvbnN0IHN0YXJ0R2FtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydC1nYW1lJyk7XG5jb25zdCBnYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKTtcbmNvbnN0IGxhbmRXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxhbmQnKTtcbmNvbnN0IHN0YXR1c0ljb25YID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcGxheWVyPVwiWFwiXScpO1xuY29uc3Qgc3RhdHVzSWNvbk8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wbGF5ZXI9XCJPXCJdJyk7XG5jb25zdCBnYW1lR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWdyaWQnKTtcbmNvbnN0IHBlcnNMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWUtcGVycy5fbGVmdCcpO1xuY29uc3QgcGVyc1JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWUtcGVycy5fcmlnaHQnKTtcbmNvbnN0IGdhbWVPdmVyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLW92ZXInKTtcblxubGV0IGJvYXJkID0gWycnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJyddO1xubGV0IGlzQ29tcHV0ZXJYID0gdHJ1ZTtcbmxldCBjdXJyZW50UGxheWVyLCBjb21wdXRlclBsYXllcjtcblxuZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG5cbmlmIChpc0NvbXB1dGVyWCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpZGU9XCJYXCJdJykuY2xhc3NMaXN0LnJlbW92ZSgnX2FjdGl2ZScpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpZGU9XCIwXCJdJykuY2xhc3NMaXN0LmFkZCgnX2FjdGl2ZScpO1xufSBlbHNlIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaWRlPVwiMFwiXScpLmNsYXNzTGlzdC5yZW1vdmUoJ19hY3RpdmUnKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaWRlPVwiWFwiXScpLmNsYXNzTGlzdC5hZGQoJ19hY3RpdmUnKTtcbn1cblxuY29uc3Qgd2lubmluZ0NvbWJvcyA9IFtcbiAgICBbMCwgMSwgMl0sXG4gICAgWzMsIDQsIDVdLFxuICAgIFs2LCA3LCA4XSxcbiAgICBbMCwgMywgNl0sXG4gICAgWzEsIDQsIDddLFxuICAgIFsyLCA1LCA4XSxcbiAgICBbMCwgNCwgOF0sXG4gICAgWzIsIDQsIDZdLFxuXTtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZUdhbWUoKSB7XG4gICAgY3VycmVudFBsYXllciA9IGlzQ29tcHV0ZXJYID8gJ9CT0YDQsNCy0LXRhtGMIDAyJyA6ICfQk9GA0LDQstC10YbRjCAwMSc7XG4gICAgY29tcHV0ZXJQbGF5ZXIgPSBpc0NvbXB1dGVyWCA/ICfQk9GA0LDQstC10YbRjCAwMScgOiAn0JPRgNCw0LLQtdGG0YwgMDInO1xuICAgIGJvYXJkID0gWycnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJyddO1xuICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCd0YWtlbicsICdYLXBsYXllcicsICdPLXBsYXllcicpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW4tbGluZScpO1xuICAgIGlmIChsaW5lKSB7XG4gICAgICAgIGxpbmUuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgwKSc7XG4gICAgfVxuXG5cbiAgICBjaGVja1N0YXR1c0NvbnRhaW5lcihjdXJyZW50UGxheWVyKTtcbiAgICBjaGVja1N0YXR1c0ljb24oY3VycmVudFBsYXllcik7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYCR7Y3VycmVudFBsYXllcn1gO1xuICAgIHN0YXR1c1RleHRJbmZvLnRleHRDb250ZW50ID0gYNCi0JLQhtCZX9Cl0IbQlGA7XG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIgPT09IGNvbXB1dGVyUGxheWVyKSB7XG4gICAgICAgIHNldFRpbWVvdXQoYmVzdE1vdmUsIDUwMCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGVja1N0YXR1c0ljb24ocGxheWVyKSB7XG4gICAgaWYgKHBsYXllciA9PT0gJ9CT0YDQsNCy0LXRhtGMIDAxJykge1xuICAgICAgICBzdGF0dXNJY29uWC5jbGFzc0xpc3QuYWRkKFwiX2FjdGl2ZVwiKTtcbiAgICAgICAgc3RhdHVzSWNvbk8uY2xhc3NMaXN0LnJlbW92ZShcIl9hY3RpdmVcIik7XG4gICAgfVxuICAgIGlmIChwbGF5ZXIgPT09ICfQk9GA0LDQstC10YbRjCAwMicpIHtcbiAgICAgICAgc3RhdHVzSWNvbk8uY2xhc3NMaXN0LmFkZChcIl9hY3RpdmVcIik7XG4gICAgICAgIHN0YXR1c0ljb25YLmNsYXNzTGlzdC5yZW1vdmUoXCJfYWN0aXZlXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tTdGF0dXNDb250YWluZXIocGxheWVyKSB7XG4gICAgaWYgKHBsYXllciA9PT0gJ9CT0YDQsNCy0LXRhtGMIDAxJykge1xuICAgICAgICBzdGF0dXNCb3guY2xhc3NMaXN0LmFkZChcIlgtcGxheWVyXCIpO1xuICAgICAgICBzdGF0dXNCb3guY2xhc3NMaXN0LnJlbW92ZShcIk8tcGxheWVyXCIpO1xuICAgIH1cbiAgICBpZiAocGxheWVyID09PSAn0JPRgNCw0LLQtdGG0YwgMDInKSB7XG4gICAgICAgIHN0YXR1c0JveC5jbGFzc0xpc3QuYWRkKFwiTy1wbGF5ZXJcIik7XG4gICAgICAgIHN0YXR1c0JveC5jbGFzc0xpc3QucmVtb3ZlKFwiWC1wbGF5ZXJcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGVja1dpbm5lcihwbGF5ZXIpIHtcbiAgICBmb3IgKGNvbnN0IGNvbWJvIG9mIHdpbm5pbmdDb21ib3MpIHtcbiAgICAgICAgaWYgKGNvbWJvLmV2ZXJ5KGluZGV4ID0+IGJvYXJkW2luZGV4XSA9PT0gcGxheWVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbWJvO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0RyYXcoKSB7XG4gICAgcmV0dXJuIGJvYXJkLmV2ZXJ5KGNlbGwgPT4gY2VsbCAhPT0gJycpO1xufVxuXG5mdW5jdGlvbiBiZXN0TW92ZSgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbGV0IGJlc3RTY29yZSA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IG1vdmU7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGJvYXJkW2ldID09PSAnJykge1xuICAgICAgICAgICAgICAgIGJvYXJkW2ldID0gY29tcHV0ZXJQbGF5ZXI7XG4gICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gbWluaW1heChib2FyZCwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJvYXJkW2ldID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gYmVzdFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgICAgICBtb3ZlID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBib2FyZFttb3ZlXSA9IGNvbXB1dGVyUGxheWVyO1xuXG4gICAgICAgIGlmIChjb21wdXRlclBsYXllciA9PT0gXCLQk9GA0LDQstC10YbRjCAwMlwiKSB7XG4gICAgICAgICAgICBjZWxsc1ttb3ZlXS5jbGFzc0xpc3QuYWRkKCdPLXBsYXllcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wdXRlclBsYXllciA9PT0gXCLQk9GA0LDQstC10YbRjCAwMVwiKSB7XG4gICAgICAgICAgICBjZWxsc1ttb3ZlXS5jbGFzc0xpc3QuYWRkKCdYLXBsYXllcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hlY2tTdGF0dXNJY29uKGNvbXB1dGVyUGxheWVyKTtcbiAgICAgICAgY2hlY2tTdGF0dXNDb250YWluZXIoY3VycmVudFBsYXllcik7XG4gICAgICAgIHN0YXR1c1RleHRJbmZvLnRleHRDb250ZW50ID0gYNCn0JXQmtCQ0JlgO1xuXG4gICAgICAgIGNlbGxzW21vdmVdLmNsYXNzTGlzdC5hZGQoJ3Rha2VuJyk7XG5cbiAgICAgICAgY29uc3Qgd2lubmluZ0NvbWJvID0gY2hlY2tXaW5uZXIoY29tcHV0ZXJQbGF5ZXIpO1xuICAgICAgICBpZiAod2lubmluZ0NvbWJvKSB7XG4gICAgICAgICAgICBzaG93V2luTGluZSh3aW5uaW5nQ29tYm8pO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYCR7Y29tcHV0ZXJQbGF5ZXJ9YDtcbiAgICAgICAgICAgICAgICBoaWRlQWZ0ZXJHYW1lKFwibG9zZVwiKVxuICAgICAgICAgICAgICAgIGVuZEdhbWUoKTtcbiAgICAgICAgICAgIH0sIDUwMClcbiAgICAgICAgfSBlbHNlIGlmIChpc0RyYXcoKSkge1xuICAgICAgICAgICAgaGlkZUFmdGVyR2FtZShcImRyYXdcIilcbiAgICAgICAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBcItCd0ZbRh9C40Y8hXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGxheWVyID0gY3VycmVudFBsYXllciA9PT0gJ9CT0YDQsNCy0LXRhtGMIDAxJyA/ICfQk9GA0LDQstC10YbRjCAwMicgOiAn0JPRgNCw0LLQtdGG0YwgMDEnO1xuICAgICAgICAgICAgICAgIGNoZWNrU3RhdHVzSWNvbihjdXJyZW50UGxheWVyKTtcbiAgICAgICAgICAgICAgICBjaGVja1N0YXR1c0NvbnRhaW5lcihjdXJyZW50UGxheWVyKTtcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0SW5mby50ZXh0Q29udGVudCA9IGDQotCS0IbQmV/QpdCG0JRgO1xuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgJHtjdXJyZW50UGxheWVyfWA7XG4gICAgICAgICAgICB9LCAxNTAwKTtcbiAgICAgICAgfVxuICAgIH0sIDEwMDApO1xufVxuXG5mdW5jdGlvbiBtaW5pbWF4KGJvYXJkLCBkZXB0aCwgaXNNYXhpbWl6aW5nKSB7XG4gICAgaWYgKGNoZWNrV2lubmVyKGNvbXB1dGVyUGxheWVyKSkgcmV0dXJuIDEwIC0gZGVwdGg7XG4gICAgaWYgKGNoZWNrV2lubmVyKGN1cnJlbnRQbGF5ZXIpKSByZXR1cm4gZGVwdGggLSAxMDtcbiAgICBpZiAoaXNEcmF3KCkpIHJldHVybiAwO1xuXG4gICAgaWYgKGlzTWF4aW1pemluZykge1xuICAgICAgICBsZXQgYmVzdFNjb3JlID0gLUluZmluaXR5O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYm9hcmRbaV0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgYm9hcmRbaV0gPSBjb21wdXRlclBsYXllcjtcbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSBtaW5pbWF4KGJvYXJkLCBkZXB0aCArIDEsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBib2FyZFtpXSA9ICcnO1xuICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IE1hdGgubWF4KHNjb3JlLCBiZXN0U2NvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZXN0U2NvcmU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGJlc3RTY29yZSA9IEluZmluaXR5O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYm9hcmRbaV0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgYm9hcmRbaV0gPSBjdXJyZW50UGxheWVyO1xuICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IG1pbmltYXgoYm9hcmQsIGRlcHRoICsgMSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYm9hcmRbaV0gPSAnJztcbiAgICAgICAgICAgICAgICBiZXN0U2NvcmUgPSBNYXRoLm1pbihzY29yZSwgYmVzdFNjb3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmVzdFNjb3JlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2VsbENsaWNrKGUpIHtcbiAgICBjb25zdCBjZWxsID0gZS50YXJnZXQ7XG4gICAgY29uc3QgaW5kZXggPSBjZWxsLmRhdGFzZXQuaW5kZXg7XG5cbiAgICBpZiAoYm9hcmRbaW5kZXhdID09PSAnJyAmJiBjdXJyZW50UGxheWVyICE9PSBjb21wdXRlclBsYXllcikge1xuICAgICAgICBib2FyZFtpbmRleF0gPSBjdXJyZW50UGxheWVyO1xuXG4gICAgICAgIGlmIChjdXJyZW50UGxheWVyID09PSBcItCT0YDQsNCy0LXRhtGMIDAyXCIpIHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnTy1wbGF5ZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFBsYXllciA9PT0gXCLQk9GA0LDQstC10YbRjCAwMVwiKSB7XG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ1gtcGxheWVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ3Rha2VuJyk7XG5cbiAgICAgICAgY29uc3Qgd2lubmluZ0NvbWJvID0gY2hlY2tXaW5uZXIoY3VycmVudFBsYXllcik7XG4gICAgICAgIGlmICh3aW5uaW5nQ29tYm8pIHtcbiAgICAgICAgICAgIHNob3dXaW5MaW5lKHdpbm5pbmdDb21ibyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYCR7Y3VycmVudFBsYXllcn1gO1xuICAgICAgICAgICAgICAgIGhpZGVBZnRlckdhbWUoXCJ3aW5cIilcbiAgICAgICAgICAgICAgICBlbmRHYW1lKCk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRHJhdygpKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBoaWRlQWZ0ZXJHYW1lKFwiZHJhd1wiKVxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBcItCd0ZbRh9C40Y8hXCI7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYCR7Y29tcHV0ZXJQbGF5ZXJ9YDtcbiAgICAgICAgICAgIH0sMTUwMClcbiAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIgPSBjb21wdXRlclBsYXllcjtcblxuICAgICAgICAgICAgc2V0VGltZW91dChiZXN0TW92ZSwgNTAwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaGlkZUFmdGVyR2FtZSh3aW5uZXIpe1xuICAgIGdhbWVDb250YWluZXIuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgIGdhbWVHcmlkLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICBzdGF0dXNCb3guY2xhc3NMaXN0LnJlbW92ZShcIk8tcGxheWVyXCIsIFwiWC1wbGF5ZXJcIik7XG4gICAgcGVyc0xlZnQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKDIyMCUpXCI7XG4gICAgcGVyc1JpZ2h0LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtMjIwJSkgc2NhbGUoLTEsIDEpXCI7XG5cblxuXG4gICAgaWYod2lubmVyID09PSBcImxvc2VcIil7XG4gICAgICAgIGdhbWVPdmVyVGV4dC50ZXh0Q29udGVudCA9IFwi0L3QtSDQv9C+0YnQsNGB0YLQuNC70L4hXCJcbiAgICB9XG4gICAgaWYod2lubmVyID09PSBcIndpblwiKXtcbiAgICAgICAgZ2FtZU92ZXJUZXh0LnRleHRDb250ZW50ID0gXCLRgtC4INC/0LXRgNC10LzRltCzIVwiXG4gICAgfVxuICAgIGlmKHdpbm5lciA9PT0gXCJkcmF3XCIpe1xuICAgICAgICBnYW1lT3ZlclRleHQudGV4dENvbnRlbnQgPSBcItGC0Lgg0LHRg9CyINC90LAg0YDRltCy0L3RliFcIlxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgIGdhbWVPdmVyVGV4dC5jbGFzc0xpc3QucmVtb3ZlKFwib3BhY2l0eVwiKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgaWYod2lubmVyID09PSBcImRyYXdcIil7XG4gICAgICAgICAgICAgICAgc2hvd1BvcHVwKFwiLl9kcmF3XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYod2lubmVyID09PSBcIndpblwiKXtcbiAgICAgICAgICAgICAgICBzaG93UG9wdXAoXCIuX3dpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHdpbm5lciA9PT0gXCJsb3NlXCIpe1xuICAgICAgICAgICAgICAgIHNob3dQb3B1cChcIi5fbG9zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuXG4gICAgfSwgMjAwKVxuXG59XG5cbmZ1bmN0aW9uIGVuZEdhbWUoKSB7XG4gICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IGNlbGwuY2xhc3NMaXN0LmFkZCgndGFrZW4nKSk7XG59XG5cbnJlc3RhcnRCdG5zLmZvckVhY2goYnRuID0+e1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGlzQ29tcHV0ZXJYID0gIWlzQ29tcHV0ZXJYO1xuICAgICAgICAgICAgaW5pdGlhbGl6ZUdhbWUoKTtcbiAgICAgICAgICAgIGdhbWVPdmVyVGV4dC50ZXh0Q29udGVudCA9IGBgO1xuICAgICAgICAgICAgZ2FtZUdyaWQuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgICAgICAgICAgZ2FtZUNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgICAgICAgICBwZXJzTGVmdC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoMCUpXCI7XG4gICAgICAgICAgICBwZXJzUmlnaHQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKDAlKSBzY2FsZSgtMSwgMSlcIjtcbiAgICAgICAgICAgIHNpZGVCdG5zLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcIl9hY3RpdmVcIilcbiAgICAgICAgICAgICAgICBzdGFydEdhbWUuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRHYW1lLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lkZSA9IGJ0bi5kYXRhc2V0LnNpZGU7XG4gICAgICAgICAgICAgICAgICAgIGlzQ29tcHV0ZXJYID0gc2lkZSAhPT0gJ1gnO1xuICAgICAgICAgICAgICAgICAgICBzaWRlQnRucy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdfYWN0aXZlJykpO1xuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIikuZm9yRWFjaChwb3B1cCA9PiB7XG4gICAgICAgICAgICAgICAgaWYocG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdfc3RhcnQnKSl7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUtcG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ2hpZGUtcG9wdXAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbn0pXG5cbmNlbGxzLmZvckVhY2goY2VsbCA9PiBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2VsbENsaWNrKSk7XG5cbnNpZGVCdG5zLmZvckVhY2goYnRuID0+IHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNpZGUgPSBidG4uZGF0YXNldC5zaWRlO1xuICAgICAgICBpc0NvbXB1dGVyWCA9IHNpZGUgIT09ICdYJztcbiAgICAgICAgc2lkZUJ0bnMuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnX2FjdGl2ZScpKTtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ19hY3RpdmUnKTtcbiAgICB9KTtcbn0pO1xuXG5zdGFydEdhbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZGUtc2VsZWN0aW9uJykuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICBnYW1lQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgbGFuZFdyYXBwZXIuY2xhc3NMaXN0LmFkZChcIl9kZWNvclwiKTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGVuYWJsZU1vdXNlU2NhbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlY29yJykpO1xuICAgIH0sIDI1MDApO1xuICAgIGluaXRpYWxpemVHYW1lKCk7XG4gICAgaGlkZVBvcHVwKFwiI3NpZGUtc2VsZWN0aW9uXCIpO1xufSk7XG5cbmZ1bmN0aW9uIHNob3dQb3B1cChwb3B1cCkge1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHBvcHVwID0gb3ZlcmxheS5xdWVyeVNlbGVjdG9yKHBvcHVwKTtcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwib3BhY2l0eVwiKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZS1wb3B1cFwiKTtcbiAgICAgICAgfSwgNTAwKVxuICAgIH0sIDIwMDApXG5cbn1cblxuZnVuY3Rpb24gaGlkZVBvcHVwKHBvcHVwKSB7XG4gICAgcG9wdXAgPSBvdmVybGF5LnF1ZXJ5U2VsZWN0b3IocG9wdXApO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcIm9wYWNpdHlcIik7XG4gICAgcG9wdXAuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZU1vdXNlU2NhbGUoZWxlbWVudCkge1xuICAgIGNvbnN0IG1pblNjYWxlID0gMTtcbiAgICBjb25zdCBtYXhTY2FsZSA9IDEuMDU7XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gJ3RyYW5zZm9ybSAwLjFzIGVhc2UnO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICAgIGNvbnN0IHkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICAgICAgY29uc3QgY2VudGVyWCA9IHJlY3Qud2lkdGggLyAyO1xuICAgICAgICBjb25zdCBjZW50ZXJZID0gcmVjdC5oZWlnaHQgLyAyO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguaHlwb3QoeCAtIGNlbnRlclgsIHkgLSBjZW50ZXJZKTtcbiAgICAgICAgY29uc3QgbWF4RGlzdGFuY2UgPSBNYXRoLmh5cG90KGNlbnRlclgsIGNlbnRlclkpO1xuICAgICAgICBjb25zdCBzY2FsZSA9IG1pblNjYWxlICsgKDEgLSBkaXN0YW5jZSAvIG1heERpc3RhbmNlKSAqIChtYXhTY2FsZSAtIG1pblNjYWxlKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHtNYXRoLm1pbihtYXhTY2FsZSwgTWF0aC5tYXgobWluU2NhbGUsIHNjYWxlKSl9KWA7XG4gICAgfSk7XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlKCR7bWluU2NhbGV9KWA7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNob3dXaW5MaW5lKGNvbWJvKSB7XG4gICAgY29uc3QgbGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW4tbGluZScpO1xuICAgIGxpbmUuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgwKSc7XG4gICAgLy8gbGluZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAvLyBsaW5lLnN0eWxlLmhlaWdodCA9ICc0NHB4JztcbiAgICAvLyBsaW5lLnN0eWxlLmJhY2tncm91bmQgPSAnIzAwZjBmZic7XG5cbiAgICBjb25zdCBwb3NpdGlvbnMgPSB7XG4gICAgICAgICcwLDEsMic6IHsgdG9wOiAnMjYlJywgbGVmdDogJzUwJScsIHJvdGF0ZTogJzBkZWcnLCB3aWR0aDogJzgwJScgfSxcbiAgICAgICAgJzMsNCw1JzogeyB0b3A6ICc1MiUnLCBsZWZ0OiAnNTAlJywgcm90YXRlOiAnMGRlZycsIHdpZHRoOiAnODAlJyB9LFxuICAgICAgICAnNiw3LDgnOiB7IHRvcDogJzc4LjMzJScsIGxlZnQ6ICc1MCUnLCByb3RhdGU6ICcwZGVnJywgd2lkdGg6ICc4MCUnIH0sXG4gICAgICAgICcwLDMsNic6IHsgdG9wOiAnNTAlJywgbGVmdDogJzI0LjUlJywgcm90YXRlOiAnOTBkZWcnLCB3aWR0aDogJzgwJSd9LFxuICAgICAgICAnMSw0LDcnOiB7IHRvcDogJzUwJScsIGxlZnQ6ICc1MCUnLCByb3RhdGU6ICc5MGRlZycsIHdpZHRoOiAnODAlJyB9LFxuICAgICAgICAnMiw1LDgnOiB7IHRvcDogJzUwJScsIGxlZnQ6ICc3Ni41JScsIHJvdGF0ZTogJzkwZGVnJywgd2lkdGg6ICc4MCUnIH0sXG4gICAgICAgICcwLDQsOCc6IHsgdG9wOiAnNTAlJywgbGVmdDogJzUwJScsIHJvdGF0ZTogJzQ1ZGVnJywgd2lkdGg6ICcxMDAlJyB9LFxuICAgICAgICAnMiw0LDYnOiB7IHRvcDogJzUwJScsIGxlZnQ6ICc1MCUnLCByb3RhdGU6ICctNDVkZWcnLCB3aWR0aDogJzEwMCUnIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IGtleSA9IGNvbWJvLnNvcnQoKGEsIGIpID0+IGEgLSBiKS5qb2luKCcsJyk7XG5cblxuICAgIGNvbnN0IHBvcyA9IHBvc2l0aW9uc1trZXldO1xuXG4gICAgbGV0IHdpZHRoID0gcG9zLndpZHRoO1xuXG4gICAgaWYgKHBvcykge1xuICAgICAgICBsaW5lLnN0eWxlLnRvcCA9IHBvcy50b3A7XG4gICAgICAgIGxpbmUuc3R5bGUubGVmdCA9IHBvcy5sZWZ0O1xuICAgICAgICBsaW5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKCR7cG9zLnJvdGF0ZX0pIHNjYWxlWCgxKWA7XG4gICAgICAgIGxpbmUuc3R5bGUud2lkdGggPSBgJHtwb3Mud2lkdGh9YDtcbiAgICAgICAgbGluZS5zdHlsZS5vcGFjaXR5ID0gYDFgO1xuICAgIH1cbn0iXX0=
